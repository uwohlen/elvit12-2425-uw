<!DOCTYPE html>
<html lang='no'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title></title>
    <style>
        table, th, td {
            border: solid 1px black;
            padding: 5px;
            border-collapse: collapse;
        }
    </style>
</head>
<body>
    <table id="idTab">

    </table>
    <script>

        // Sammenligningsfunksjon for sort()-funksjonen til 2D-arrays
        // Sorterer fra minst til størst
        // Sorterer på kolonne med index 4
        function sammenlign4(a,b) {
            if (typeof a[4] === "string") {
                return -1
            }
            else if (typeof b[4] === "string") {
                return 1
            }
            if (a[4] > b[4]) {
                return -1;
            }
            else if (a[4] < b[4]) {
                return 1;
            }
            else {
                return 0;
            }
        }


        let tabEl = document.getElementById("idTab");


        let resultat = [
            ["Navn","Klasse","Alder","Karakterer"],
            ["Per","3STA",20,[5,3,4,4,5,3,4,5,6]],
            ["Pål","3STA",19,[4,3,4,5,3,4,5,6,4]],
            ["Espen","3STB",18,[2,3,4,5,3,4,15,16,4]],
            ["Kari","3STB",19,[2,3,4,6,2,1,3,5,5]]
        ];

        resultat[0].push("Snitt")
        for (let i=1; i<resultat.length; i++) {
            let sum = 0;
            for (let j=0; j<resultat[i][3].length; j++){
                sum += resultat[i][3][j];
            }
            let snitt = sum / resultat[i][3].length;
            resultat[i].push(Math.round(snitt*10)/10);
        }

        resultat.sort(sammenlign4)

       let tekst = "";

        for (let i=0; i<resultat.length; i++) {
            if (i === 0) {
                tekst += "<thead><tr>";
                for (let j=0; j<resultat[i].length; j++) {
                    tekst += "<th>" + resultat[i][j] + "</th>";
                }    
                tekst += "</tr></thead><tbody>";
            }
            else {
                tekst += "<tr>";
                for (let j=0; j<resultat[i].length; j++) {
                    tekst += "<td>" + resultat[i][j] + "</td>";
                }    
                tekst += "</tr>";
            }
            
        }

       tabEl.innerHTML = tekst+"</tbody>";


       
    </script>
</body>
</html>